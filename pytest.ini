[pytest]
# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Coverage configuration
addopts =
    --cov=src
    --cov-report=html
    --cov-report=term-missing
    --cov-fail-under=70
    -v

# Asyncio configuration
asyncio_mode = auto

# Markers for test categorization
markers =
    unit: Unit tests for individual components
    integration: Integration tests across multiple components
    slow: Tests that take longer to execute
    requires_openai: Tests that require Azure OpenAI credentials
    requires_graph: Tests that require Microsoft Graph API credentials
    requires_search: Tests that require Azure Cognitive Search credentials
    phase1: Phase 1 - Core Models & State Management tests
    phase2: Phase 2 - Plugin tests
    phase3: Phase 3 - Process Step tests
    phase4: Phase 4 - Integration tests
    phase5: Phase 5 - Error Handling & Edge Case tests
    phase6: Phase 6 - Performance & Load tests
    deferred: Tests that are deferred for future implementation
    legacy: Legacy tests (not actively maintained)

# Output options
console_output_style = progress
log_cli = false
log_cli_level = INFO

# Warning filters
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Minimum Python version
minversion = 3.10
